<!DOCTYPE html>
<html>
<head>
    <title>Social Media Automation</title>
    <!-- TikTok SDK -->
    <script src="https://sf-tk-sg.ibytedtos.com/obj/static-web/tiktok/tiktok-auth.js"></script>
</head>
<body>
    <h1>Social Media Automation</h1>
    <p>A tool for automating social media content posting across multiple platforms.</p>
    
    <!-- TikTok Login Button -->
    <div class="login-container">
        <button id="tiktok-login-btn">Login with TikTok</button>
    </div>
    
    <!-- Upload Form (initially hidden) -->
    <div id="upload-form" style="display: none;">
        <h2>Upload Video to TikTok</h2>
        <form id="video-upload-form">
            <input type="file" id="video-file" accept="video/*" required><br><br>
            <input type="text" id="description" placeholder="Video description"><br><br>
            <input type="text" id="hashtags" placeholder="Hashtags (comma separated)"><br><br>
            <select id="visibility">
                <option value="private">Only me</option>
                <option value="public">Public</option>
            </select><br><br>
            <button type="submit">Upload Video</button>
        </form>
    </div>

    <ul>
        <li><a href="TERMS">Terms of Service</a></li>
        <li><a href="PRIVACY">Privacy Policy</a></li>
    </ul>

    <script>
        // Initialize TikTok SDK
        const CLIENT_KEY = 'awdmgl4x0u4626up';
        
        window.onload = function() {
            console.log('Window loaded');
            
            // Check if TikTok SDK is loaded
            if (typeof TikTokAuth === 'undefined') {
                console.error('TikTok SDK not loaded!');
                document.body.innerHTML += '<p style="color: red;">Error: TikTok SDK failed to load</p>';
                return;
            }
            
            console.log('TikTok SDK loaded');
            
            // Initialize TikTok Login Kit
            try {
                TikTokAuth.init({
                    client_key: CLIENT_KEY,
                    redirect_uri: 'https://nassermendes.github.io/social-media-automation/callback',
                    scope: 'user.info.basic,video.upload'
                });
                console.log('TikTok SDK initialized');
            } catch (error) {
                console.error('Error initializing TikTok SDK:', error);
                document.body.innerHTML += '<p style="color: red;">Error: ' + error.message + '</p>';
            }
            
            // Add click handler for login button
            document.getElementById('tiktok-login-btn').addEventListener('click', function() {
                console.log('Login button clicked');
                try {
                    TikTokAuth.login();
                    console.log('Login function called');
                } catch (error) {
                    console.error('Error during login:', error);
                    document.body.innerHTML += '<p style="color: red;">Login error: ' + error.message + '</p>';
                }
            });
        };
    </script>
</body>
</html>
